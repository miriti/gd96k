<!DOCTYPE html><html><style>html,head{margin:0px;padding:0px;background-color:#333;}#c{width:800px;margin-right:auto;margin-left:auto;}</style><body><div id="c"></div><script>'use strict';var d="1c1c1c 393939 565656 727272 8f8f8f adadad cacaca e6e6e6".split(" ");function g(a,c){null!==c&&(a.prototype=Object.create(c.prototype));a.prototype.constructor=a}var h=0,h=(new Date).getTime(),k=Array(256);function l(a,c){this.x=a;this.y=c}g(l,null);l.prototype.set=function(a,c){this.x=a;this.y=c};function n(){this.children=[];this.rotation=this.y=this.x=0;this.scale=new l(1,1);this.parent=null;this.visible=!0;this.height=this.width=0}g(n,null);
n.prototype.rect=function(a,c,b,e,f,m){a.fillStyle="#"+m;a.strokeStyle="#000";a.lineWidth=1;a.fillRect(c,b,e,f)};n.prototype.c=function(a){this.children.push(a);a.parent=this};n.prototype.removeChild=function(a){a=this.children.indexOf(a);-1!=a&&(this.children[a].parent=null,this.children.splice(a,1))};n.prototype.update=function(a){for(var c=this.children.length-1;0<=c;c--)this.children[c].update(a)};
n.prototype.a=function(a){if(this.visible&&(a.translate(this.x,this.y),a.scale(this.scale.x,this.scale.y),a.rotate(this.rotation),0<this.children.length))for(var c in this.children)a.save(),this.children[c].a(a),a.restore()};function p(a,c,b){n.call(this);this.width=a;this.height=c;this.color=b}g(p,n);p.prototype.a=function(a){n.prototype.a.call(this,a);this.rect(a,0,0,this.width,this.height,this.color)};
function q(){n.call(this);this.x=400;this.y=300;this.color=d[7];this.e=100;this.f=!1;this.j=150;this.g=0;this.width=50;this.height=100;this.speed=300}g(q,n);q.prototype.a=function(a){this.visible&&(n.prototype.a.call(this,a),this.rect(a,-this.width/2,-this.height,this.width,this.height,this.color),this.rect(a,-2,-2,4,4,"f00"))};
q.prototype.update=function(a){n.prototype.update.call(this,a);for(var c in this.parent.i){var b=this.parent.i[c],e=this.x-b.x,f=this.y-b.y;Math.abs(e)<b.width/2&&Math.abs(f)<b.height/2&&(console.log("cliision",b,this.x,this.y,e,f),b.width/2-Math.abs(e)<b.height/2-Math.abs(f)?this.x=this.x>b.x?this.x+(b.width/2-e):this.x-(b.width/2+e):this.y=this.y>b.y?this.y+(b.height/2-f):this.y-(b.height/2+f))}this.f&&(1.5>this.g?(this.visible=0===Math.floor(h/this.j)%2,this.g+=a):this.parent.removeChild(this))};
function r(){q.call(this);this.color=d[4]}g(r,q);function s(){q.call(this);this.h=!1}g(s,q);
s.prototype.update=function(a){k[37]&&(this.x-=this.speed*a);k[39]&&(this.x+=this.speed*a);k[38]&&(this.y-=this.speed*a);k[40]&&(this.y+=this.speed*a);if(k[90]){if(!this.h){this.h=!0;for(var c=0;c<this.parent.d.length;c++){var b=this.parent.d[c];b!=this&&!b.f&&Math.abs(b.x-this.x)<(this.width+b.width)/2&&Math.abs(b.y-this.y)<(this.height+b.height)/2&&(b.e-=10,0>b.e&&(b.e=0),0!==b.e||b.f||(b.f=!0))}}}else this.h=!1;q.prototype.update.call(this,a)};
function t(a,c,b,e){this.x=a||0;this.y=c||0;this.width=b||10;this.height=e||10}g(t,null);function u(){n.call(this);this.d=[];this.i=[];this.c(new s);var a=new r;a.x=300;a.y=300;this.c(a);w(this,new t(260,100,500,20));w(this,new t(380,300,40,600))}g(u,n);function w(a,c){a.i.push(c);var b=new p(c.width,c.height,"faa");b.x=c.x-c.width/2;b.y=c.y-c.height/2;a.c(b)}u.prototype.c=function(a){n.prototype.c.call(this,a);a instanceof q&&this.d.push(a)};
u.prototype.removeChild=function(a){n.prototype.removeChild.call(this,a);a=this.d.indexOf(a);-1!=a&&this.d.splice(a,1)};function x(){this.b=null}g(x,null);function y(a){var c=new u;a.b=c}x.prototype.update=function(a){null!==this.b&&this.b.update(a)};x.prototype.a=function(a){null!==this.b&&this.b.a(a)};
(function(a,c){function b(){var a=h=(new Date).getTime(),c=a-m;m=a;f.setTransform(1,0,0,1,0,0);f.fillStyle=d[0];f.fillRect(0,0,800,600);v.update(c/1E3);v.a(f);requestAnimationFrame(b)}var e=a.createElement("canvas"),f=e.getContext("2d"),m=h,v=new x;e.width=800;e.height=600;a.getElementById("c").appendChild(e);c.addEventListener("keydown",function(a){if("undefined"==typeof k[a.keyCode]||null===k[a.keyCode])k[a.keyCode]=h});c.addEventListener("keyup",function(a){k[a.keyCode]=null});y(v);b()})(document,
window);
</script></body></html>