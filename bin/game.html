<!DOCTYPE html><html><style>html,head{margin:0px;padding:0px;background-color:#333;}#c{width:800px;margin-right:auto;margin-left:auto;}</style><body><div id="c"></div><script>'use strict';var d="1c1c1c 393939 565656 727272 8f8f8f adadad cacaca e6e6e6".split(" ");function f(a,b){null!==b&&(a.prototype=Object.create(b.prototype));a.prototype.constructor=a}var h=0,h=(new Date).getTime(),k=Array(256);function l(a,b){this.x=a;this.y=b}f(l,null);l.prototype.set=function(a,b){this.x=a;this.y=b};function m(){this.children=[];this.rotation=this.y=this.x=0;this.scale=new l(1,1);this.parent=null;this.visible=!0;this.height=this.width=0}f(m,null);
m.prototype.rect=function(a,b,c,e,g,s){a.fillStyle="#"+s;a.strokeStyle="#000";a.lineWidth=1;a.fillRect(b,c,e,g)};m.prototype.c=function(a){this.children.push(a);a.parent=this};m.prototype.removeChild=function(a){a=this.children.indexOf(a);-1!=a&&(this.children[a].parent=null,this.children.splice(a,1))};m.prototype.update=function(a){for(var b=this.children.length-1;0<=b;b--)this.children[b].update(a)};
m.prototype.g=function(a){if(this.visible&&(a.translate(this.x,this.y),a.scale(this.scale.x,this.scale.y),a.rotate(this.rotation),0<this.children.length))for(var b in this.children)a.save(),this.children[b].g(a),a.restore()};function n(a,b,c,e){m.call(this);this.width=a||100;this.height=b||100;this.color=c||d[0];this.s=e||new l(0,0)}f(n,m);n.prototype.g=function(a){m.prototype.g.call(this,a);this.rect(a,-this.s.x,-this.s.y,this.width,this.height,this.color)};function p(a){this.b=a;this.d=0}f(p,null);
p.prototype.update=function(a){this.d+=Math.PI*a};function q(a){p.call(this,a);this.b.a.f.x=-8;this.b.a.f.y=-0;this.b.a.h.x=8;this.b.a.h.y=-0}f(q,p);q.prototype.update=function(a){p.prototype.update.call(this,a)};function r(a){p.call(this,a);a.e.y=0}r.prototype.update=function(a){p.prototype.update.call(this,a);this.b.a.f.x=-8+3*Math.sin(10*this.d);this.b.a.f.y=-3+3*Math.cos(10*this.d);this.b.a.h.x=8+3*Math.cos(5*this.d);this.b.a.h.y=-3+3*Math.sin(10*this.d)};
function t(){m.call(this);this.e=new m;this.e.body=new n(30,60,d[7],new l(15,60));this.e.c(this.e.body);this.e.head=new n(15,30,d[7],new l(7.5,30));this.e.head.x=0;this.e.head.y=-60;this.e.c(this.e.head);this.a=new m;this.a.f=new n(8,50,d[7],new l(4,0));this.a.f.x=-8;this.a.c(this.a.f);this.a.h=new n(8,50,d[7],new l(4,0));this.a.h.x=8;this.a.c(this.a.h);this.c(this.e);this.c(this.a);this.l=null;this.q="";u(this,"Idle")}f(t,m);
function u(a,b){if(a.q!=b){switch(b){case "Idle":a.l=new q(a);break;case "Running":a.l=new r(a)}a.q=b}}t.prototype.update=function(a){null!==this.l&&this.l.update(a)};function w(){m.call(this);this.k=100;this.m=!1;this.t=150;this.n=0;this.width=50;this.height=100;this.speed=300;this.b=new t;this.b.y=-50;this.c(this.b)}f(w,m);
w.prototype.update=function(a){m.prototype.update.call(this,a);for(var b in this.parent.r){var c=this.parent.r[b],e=this.x-c.x,g=this.y-c.y;Math.abs(e)<c.width/2&&Math.abs(g)<c.height/2&&(c.width/2-Math.abs(e)<c.height/2-Math.abs(g)?this.x=this.x>c.x?this.x+(c.width/2-e):this.x-(c.width/2+e):this.y=this.y>c.y?this.y+(c.height/2-g):this.y-(c.height/2+g))}this.m&&(1.5>this.n?(this.visible=0===Math.floor(h/this.t)%2,this.n+=a):this.parent.removeChild(this))};function x(){w.call(this);this.d=0}f(x,w);
x.prototype.update=function(a){this.x=400+200*Math.sin(this.d);this.y=300+200*Math.cos(this.d);this.d+=Math.PI/4*a;w.prototype.update.call(this,a)};function y(){w.call(this);this.o=!1}f(y,w);
y.prototype.update=function(a){var b=!1;k[37]&&(this.x-=this.speed*a,b=!0);k[39]&&(this.x+=this.speed*a,b=!0);k[38]&&(this.y-=this.speed*a,b=!0);k[40]&&(this.y+=this.speed*a,b=!0);b?u(this.b,"Running"):u(this.b,"Idle");if(k[90]){if(!this.o)for(this.o=!0,b=0;b<this.parent.j.length;b++){var c=this.parent.j[b];c!=this&&!c.m&&Math.abs(c.x-this.x)<(this.width+c.width)/2&&Math.abs(c.y-this.y)<(this.height+c.height)/2&&(c.k-=10,0>c.k&&(c.k=0),0!==c.k||c.m||(c.m=!0))}}else this.o=!1;w.prototype.update.call(this,
a)};f(function(a,b,c,e){this.x=a||0;this.y=b||0;this.width=c||10;this.height=e||10},null);function z(){m.call(this);this.j=[];this.r=[];this.p=new y}f(z,m);z.prototype.c=function(a){m.prototype.c.call(this,a);a instanceof w&&this.j.push(a)};z.prototype.removeChild=function(a){m.prototype.removeChild.call(this,a);a=this.j.indexOf(a);-1!=a&&this.j.splice(a,1)};function A(){z.call(this);this.p.x=400;this.p.y=300;this.c(this.p);var a=new x;a.x=100;a.y=100;u(a.b,"Running");this.c(a)}f(A,z);
function B(){this.i=null}f(B,null);function C(a){var b=new A;a.i=b}B.prototype.update=function(a){null!==this.i&&this.i.update(a)};B.prototype.g=function(a){null!==this.i&&this.i.g(a)};
(function(a,b){function c(){var a=h=(new Date).getTime(),b=(a-s)/1E3;s=a;g.setTransform(1,0,0,1,0,0);g.fillStyle=d[0];g.fillRect(0,0,800,600);if(.02<b){do v.update(.02),b-=.02;while(.02<b)}v.update(b);v.g(g);requestAnimationFrame(c)}var e=a.createElement("canvas"),g=e.getContext("2d"),s=h,v=new B;e.width=800;e.height=600;a.getElementById("c").appendChild(e);b.addEventListener("keydown",function(a){if("undefined"==typeof k[a.keyCode]||null===k[a.keyCode])k[a.keyCode]=h});b.addEventListener("keyup",
function(a){k[a.keyCode]=null});C(v);c()})(document,window);
</script></body></html>